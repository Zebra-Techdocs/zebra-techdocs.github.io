
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utilties, including EMDK for Android, EMDK for Xamarin, StageNow and Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="Using Push-to-Talk">
    <title>Using Push-to-Talk - TechDocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
<!--     
    <link href="/css/font-awesome.min.css" rel="stylesheet">
 -->    
    <link href="/css/all.css" rel="stylesheet">
    <link href="/css/v4-shims.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script>
    <link rel="shortcut icon" href="/favicon.ico">
<script src="/js/jquery.js"></script></head><!--/head-->


<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                        <li class="dropdown">
                          <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"> EMDK For Android 7.6
                          <span class="caret"></span></button>
                          <ul class="dropdown-menu">
                                <li><a onclick="changeVersion('5-0','4-2','/emdk-for-android/4-2/guide/about')">EMDK For Android 4.2</a></li>
                                <li><a onclick="changeVersion('5-0','4-0','/emdk-for-android/4-0/guide/about')">EMDK For Android 4.0</a></li>
                          </ul>
                        </li>                    
                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/emdk-for-android/7-6/guide/about">
                                    About
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/guide/gettingstarted">
                                    Get Started
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/tutorial/">
                                    Tutorials
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/samples">
                                    Samples
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/guide/programming-guides">
                                    Guides
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/guide/profile-manager-guides">
                                    Profile Manager
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/faq">
                                    FAQs
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/apimenu">
                                    APIs
                            </a>
                        </li>
                        <li>
                            <a href="https://developer.zebra.com/forum/search?keys=&amp;field_zebra_curated_tags_tid%5B%5D=184">
                                    <i class="fa fa-comments-o"></i>
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-12 ">

                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

<!--                         <p><h2 id="overview">Overview</h2>

<p>This sample app demonstrates how the Push-to-Talk button on a Zebra device can be detected by Push-to-Talk applications to allow PTT functions to operate without unlocking the device. </p>

<h3 id="requirements">Requirements</h3>

<ul>
<li>Zebra device with a PTT button running Android 6.x (Marshmallow) or later</li>
</ul>

<h4 id="disclaimer"><code>DISCLAIMER:</code></h4>

<p><strong>Zebra does not recommend using this utility for production environments</strong>. This app is an <em><u>example</u></em> of how to detect PTT buttons while the Android screen is locked. <strong>No Zebra support or warranty is expressed or implied</strong>.</p>

<hr />

<h3 id="remotekeyintents">Remote Key Intents</h3>

<p>In current versions of Android, only foreground apps are able to receive the events generated by the keyboards, GPIO keys, touch screen and other input devices (except HOME and BACK keys, etc.). Some of the enterprise features and apps developed for Zebra devices require certain KeyEvents to be notified even when they are running in the background. The Remote KeyEvent Service (RKES) service facilitates such notifications and uses intents to alert apps to four preconfigured KeyEvents that cannot be changed.</p>

<h4 id="remotekeyintentformat">Remote key intent format</h4>

<p><strong>Intent Action</strong>: Specifies the KeyEvent that generated the intent</p>

<p><strong>Intent extras</strong>:
<code>Intent.EXTRA_KEY_EVENT</code>: KeyEvent object </p>

<p>Learn more <a href="https://developer.android.com/reference/android/view/KeyEvent">about KeyEvents</a></p>

<p>Event objects are generated from RKES using the following data:</p>

<h4 id="keycode">Key Code</h4>

<ul>
<li><strong>Action</strong>: 0 = key down; 1 = key up</li>

<li><strong>Down time</strong></li>

<li><strong>Time of event</strong></li>

<li><strong>Repeat count</strong></li>
</ul>

<p>The intent format applies to all intents broadcast by RKES. The following section briefly describes each intent broadcast. </p>

<h4 id="comsymbolbuttonl1"><code>com.symbol.button.L1</code></h4>

<p>Broadcast when a KeyEvent corresponding to the key code <code>KEYCODE_BUTTON_L1</code> (102) occurs.<br> 
<strong>Reserved for scanning</strong>.
<br></p>

<h4 id="comsymbolbuttonl2"><code>com.symbol.button.L2</code></h4>

<p>Broadcast when a KeyEvent corresponding to the key code <code>KEYCODE_BUTTON_L2</code> (104) occurs.<br>
<strong>Used for Push-to-Talk</strong>
<br></p>

<h4 id="comsymbolbuttonr1"><code>com.symbol.button.R1</code></h4>

<p>Broadcast when a KeyEvent corresponding to the key code <code>KEYCODE_BUTTON_R1</code> (103) occurs. <br> <strong>Reserved for scanning</strong>.
<br></p>

<h4 id="comsymbolbuttonr2"><code>com.symbol.button.R2</code></h4>

<p>Broadcast when a KeyEvent corresponding to the key <code>code KEYCODE_BUTTON_R2</code> (105) occurs.<br> 
<strong>Used for headset button during Push-to-Talk sessions</strong>
<br></p>

<hr />

<h3 id="samplecode">Sample code</h3>

<p>The snippet below shows the broadcast receiver object. Full source code is provided in the <a href="../usingptt">project download file</a>. </p>

<pre><code>  :::Java
  //Broadcast Receiver object
  private static BroadcastReceiver keyReceivers = null;

  public void createButtonReceiver() {
     //Create intent filter with the required remote KeyEvent (intent) that
     //needs to be received/processed by the application
     final IntentFilter requestFilter = new IntentFilter();
     requestFilter.addAction(“com.symbol.button.R2");
     if (keyReceivers != null) {
        getApplicationContext().unregisterReceiver(keyReceivers);
        keyReceivers = null;
     }
     if (keyReceivers == null) {
        //Create new broadcast receiver object and override onReceive method
        keyReceivers = new BroadcastReceiver() {
           @Override
           public synchronized void onReceive(Context context, final Intent intent) {
              try {
                 if (intent == null || intent.getAction() == null)
                    return;
                 KeyEvent event = intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);
                 if (event == null)
                    return;
                 keyAction = event.getAction();
                 if (event.getRepeatCount() != 0)
                    return;
                 String message = "Receiving key intent: " + intent.getAction() + " : "
                                  + (keyAction == KeyEvent.ACTION_DOWN ? "DOWN" : "UP");
                 Log.v(TAG, message);
              } catch (Exception e) {
                 e.printStackTrace();
              }
           }
        }
</code></pre></p>
 -->                        

<h2 id="redirecting-to-techdocs-archive-site" class="anchor"><a class="heading-anchor" href="#redirecting-to-techdocs-archive-site"><span></span></a>Redirecting to TechDocs archive site...</h2> 


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    


<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div>
    <script>

    var new_domain = "zebra-techdocs-archive.netlify.app";
    var old_domain = window.location.host;
    var current_href = window.location.href;
    var new_href = current_href.replace(old_domain,new_domain);
    window.location = new_href;

    </script>
                                        
</div></body></html>