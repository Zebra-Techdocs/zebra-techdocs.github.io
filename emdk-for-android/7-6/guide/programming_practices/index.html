
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utilties, including EMDK for Android, EMDK for Xamarin, StageNow and Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="EMDK for Android Programming Practices">
    <title>EMDK for Android Programming Practices - TechDocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
<!--     
    <link href="/css/font-awesome.min.css" rel="stylesheet">
 -->    
    <link href="/css/all.css" rel="stylesheet">
    <link href="/css/v4-shims.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script>
    <link rel="shortcut icon" href="/favicon.ico">
<script src="/js/jquery.js"></script></head><!--/head-->


<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                        <li class="dropdown">
                          <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"> EMDK For Android 7.6
                          <span class="caret"></span></button>
                          <ul class="dropdown-menu">
                                <li><a onclick="changeVersion('5-0','4-2','/emdk-for-android/4-2/guide/about')">EMDK For Android 4.2</a></li>
                                <li><a onclick="changeVersion('5-0','4-0','/emdk-for-android/4-0/guide/about')">EMDK For Android 4.0</a></li>
                          </ul>
                        </li>                    
                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/emdk-for-android/7-6/guide/about">
                                    About
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/guide/gettingstarted">
                                    Get Started
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/tutorial/">
                                    Tutorials
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/samples">
                                    Samples
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/guide/programming-guides">
                                    Guides
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/guide/profile-manager-guides">
                                    Profile Manager
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/faq">
                                    FAQs
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/apimenu">
                                    APIs
                            </a>
                        </li>
                        <li>
                            <a href="https://developer.zebra.com/forum/search?keys=&amp;field_zebra_curated_tags_tid%5B%5D=184">
                                    <i class="fa fa-comments-o"></i>
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/7-6/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-12 ">

                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

<!--                         <p><h5 id="alsoseeandroidmemoryconsiderationsfordevelopershttpsdeveloperzebracomcommunityhomeblog20180821androidmemoryconsiderationsfordevelopersanarticlefromzebrasoftwareengineeringthatprovidesmemoryallocationandmanagementadvice">Also see <a href="https://developer.zebra.com/community/home/blog/2018/08/21/android-memory-considerations-for-developers">Android Memory Considerations For Developers</a>, an article from Zebra software engineering that provides memory allocation and management advice.</h5>

<hr />

<h2 id="emdkconcurrencyguidelines">EMDK concurrency guidelines</h2>

<ol>
<li><p>The EMDKManager instance will always provide only one object (singleton object) of each feature like BarcodeManager, ProfileManager etc. Any attempt to request a new object of the same feature will return the object that is already initiated.</p></li>

<li><p>BarcodeManager, SimulScanManager, ProfileManager and Scan&amp;PairManager objects can be created simultaneously but cannot be accessed at the same time.</p>

<p>For example:</p>

<ul>
<li>If the BarcodeManager has enabled any one of the barcode device, then no other barcode devices can be enabled at the same time. If camera is used as the barcode device, even the Android Camera APIs cannot be used at that time.</li>

<li>Also, the SimulScanManager and Scan&amp;PairManager objects cannot enable the respective devices either.</li>

<li>However, once the BarcodeManager is disabled and released, then the SimulScanManager can enable the SimulScan device.</li>

<li>An app should either use the DataCapture feature of the ProfileManager or barcode APIs for scanning barcodes but not both</li></ul></li>

<li><p>The EMDKManager -> ProfileManager supports simultaneous usage in multiple applications. This means, an individual application needs to not release EMDKManager -> ProfileManager before going to the background. In the previous versions, if an application going to the background did not release the ProfileManager, no other applications could access ProfileManager.</p>

<p>However, the following restrictions will continue to apply:</p>

<ul>
<li>Only one instance of EMDKManager can be used in an application.</li>

<li>Only one instance of ProfileManager can be used in an application.</li>

<li>Other than the ProfileManager, all other features such as EMDKManager -> BarcodeManager used in an application must be released before another application can use that feature.</li>

<li>All instances of all features including EMDKManager must be released before the exiting of the application.</li></ul></li>
</ol>

<h2 id="creatingacommonapplicationtorunonzebraandnonzebradevices">Creating a common Application to run on Zebra and Non-Zebra devices</h2>

<p>For those who want to write a common application that is capable of running on both Zebra and Non-Zebra devices, care must be taken to use the EMDK components only on the Zebra devices as described below:  </p>

<ol>
<li><p>The common app containing the EMDK components will not install on a non-Zebra device and will result in the error “Installation error: INSTALL_FAILED_MISSING_SHARED_LIBRARY". </p>

<p>To overcome this problem, the application manifest file must be modified as shown below: </p>

<pre><code>        :::xml
        &lt;uses-library android:name="com.symbol.emdk" android:required="false" /&gt;
</code></pre></li>

<li><p>When the common app is launched on a non-Zebra device, the "ClassNotFoundException" exception may occur.  To overcome this problem, do not implement the EMDK interfaces in the MainActivity.  Instead, create a separate class (ex: EMDKAPIWrapper or any other name) and implement the EMDK related calls in that. When the activity starts, create the EMDKAPIWrapper object during the run time only if you are using the Zebra device.</p>

<pre><code>:::java
public class MainActivity extends Activity {
private EMDKWrapper emdkWrapper = null;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        /* Rebranded Zebra devices are set to "Zebra Technologies"*/
        /* Motorola devices are set to "Motorola Solutions" */

<pre><code>    if(android.os.Build.MANUFACTURER.contains("Zebra Technologies") || android.os.Build.MANUFACTURER.contains("Motorola Solutions") ){
    emdkWrapper  = new EMDKWrapper();
}
}

@Override
protected void onDestroy() {
    //Release the EMDKmanager on Application exit.
    if (emdkWrapper  != null) {
            emdkWrapper .release();            
    }
}

public class EMDKWrapper implements EMDKListener {
    EMDKManager emdkManager = null;
    @Override
    void getEMDKManager(Bundle savedInstanceState) { 
        EMDKResults results = EMDKManager.getEMDKManager(getApplicationContext(), this);

        if (results.statusCode != EMDKResults.STATUS_CODE.SUCCESS) {
            //Failed to request the EMDKManager
        }
    }
}

@Override
void release() {
    //Release the EMDKmanager on Application exit.
    if (emdkManager != null) {
        emdkManager.release();    
        emdkManager = null;        
    }
}

@Override
public void onOpened(EMDKManager emdkManager) {
    this. emdkManager = emdkManager;
//The EMDK Manager is ready and now you can call other EMDK APIs.
}


@Override
public void onClosed() {
    /* EMDKManager is closed abruptly. Call EmdkManager.release() to free the resources used by the current EMDK instance. */
    if (emdkManager != null) {
        emdkManager.release();    
        emdkManager = null;        
    }
}
</code></pre>

}
</code></pre></li>
</ol>

<h2 id="emdkmanageropeningandclosing">EMDK Manager opening and closing</h2>

<p>The application must call EMDKManager.getEMDKManager to use the EMDK. It is recommended to call this method in the onCreate method to avoid a delay at a later stage.  EMDKManager will call the interface EMDKListener.onOpened when the EMDK is ready to use and this callback will be called on main thread only; therefore the application must not block the Main thread to receive EMDKListener.onOpened callback.</p>

<p>The application must call the EMDKManager.release() in the below scenarios:</p>

<ol>
<li>On application exit.</li>

<li>On EMDKListener.onClosed callback. </li>
</ol>

<p>The EMDKListener.onClosed gets called to notify the application that the EMDKManager object has been abruptly closed due to some failures at EMDK or a lower layer. When this occurs, the application must the release the current EMDK manager instance and get the new EMDK Manager instance </p>

<blockquote>
  <p>Note: If you are blocking the main thread, the application will not get notification when the EMDK closes unexpected reasons and therefore the application must not block the main thread to receive the EMDKListener.onClosed callback.</p>
</blockquote>

<h3 id="referthebelowcodesnippetsforemdkmanageropeningandclosing">Refer the below code snippets for EMDKManager opening and closing</h3>

<pre><code>:::java
public class MainActivity extends Activity implements EMDKListener {
    private EMDKManager emdkManager = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        EMDKResults results = EMDKManager.getEMDKManager(getApplicationContext(), this);
        if (results.statusCode != EMDKResults.STATUS_CODE.SUCCESS) {
                //Failed to request the EMDKManager
            }
        }
    }

    @Override
    protected void onDestroy() {
        //Release the EMDKmanager on Application exit.
        if (emdkManager != null) {
            emdkManager.release();
            emdkManager = null;
            }
        }

    @Override
    public void onOpened(EMDKManager emdkManager) {
    this. emdkManager = emdkManager;
            //The EMDK Manager is ready and now you can call other EMDK APIs.
    }

    @Override
    public void onClosed() {
    /* EMDKManager is closed abruptly. Call EmdkManager.release() to free the  resources used by the current EMDK instance. */
    if (emdkManager != null) {
        emdkManager.release();
        emdkManager = null;
    }
    }
}
</code></pre>

<h2 id="checkingemdkversionondevice">Checking EMDK Version on Device</h2>

<p>Zebra mobile devices running Android KitKat have a built-in EMDK device runtime that can be updated independently of the OS. On devices running Android versions newer than KitKat, the built-in EMDK runtime can be updated only with an OS update. Devices running Jelly Bean have no built-in runtime.</p>

<h3 id="manualsteps">Manual Steps</h3>

<p>Go to Settings > Apps > All > EMDK Service. Click on the EMDK Service icon to see the version.</p>

<h3 id="programmaticsteps">Programmatic Steps</h3>

<p>Option 1:</p>

<pre><code>:::java
Use Android PackageManager to get the EMDK version.
try {    
    String emdkPkgName = "com.symbol.emdk.emdkservice";
        PackageInfo pinfo = getPackageManager().getPackageInfo(emdkPkgName, 0);
        String emdkVersion = pinfo.versionName;
} catch (PackageManager.NameNotFoundException e) {
    // EMDK does not exists on the device.
}
</code></pre>

<p>Option 2:</p>

<pre><code>:::java
Use EMDK VersionManager to get the EMDK version as described in the VersionManager API reference.
</code></pre>

<h2 id="selectingemdkinthemakefile">Selecting EMDK in the MAKE file</h2>

<p>The following must be declared in the application MAKE file to use the EMDK SDK library to compile the application:</p>

<pre><code>:::java
LOCAL_JAVA_LIBRARIES := com.symbol.emdk
LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES := libemdk:com.symbol.emdk/com.symbol.emdk.jar
</code></pre>

<h2 id="emdkasadependencyinbuildgradle">EMDK as a dependency in build.gradle</h2>

<p><strong>To use EMDK in a project</strong>:</p>

<ol>
<li><p>In the project folder viewer, open the <strong>build.gradle</strong> file for the <strong>app</strong> module.</p></li>

<li><p>Add the lines below to the dependencies section.</p>

<p><strong>Windows or Mac OS X</strong></p>

<pre><code>dependencies {
    compileOnly 'com.symbol:emdk:x.x.x'
    // Replace x.x.x above with the real EMDK version number
...
}
</code></pre></li>

<li><p>Rebuild the project by selecting <strong>Make Project</strong> from the <strong>Build</strong> menu.</p></li>
</ol>

<h4 id="notes">Notes:</h4>

<ul>
<li><strong>A plus sign ("+") can be substituted for a major or minor version number</strong> in the dependencies section. <br>For example, declaring <code>com.symbol:emdk:7.3.+</code> uses SDK versions 7.3 and higher.</li>

<li><strong>The x's in the sample above MUST be replaced with <a href="https://bintray.com/zebratechnologies/EMDKAndroid/com.symbol.emdk">real version numbers</a></strong>.</li>
</ul></p>
 -->                        

<h2 id="redirecting-to-techdocs-archive-site" class="anchor"><a class="heading-anchor" href="#redirecting-to-techdocs-archive-site"><span></span></a>Redirecting to TechDocs archive site...</h2> 


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    


<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div>
    <script>

    var new_domain = "zebra-techdocs-archive.netlify.app";
    var old_domain = window.location.host;
    var current_href = window.location.href;
    var new_href = current_href.replace(old_domain,new_domain);
    window.location = new_href;

    </script>
                                        
</div></body></html>